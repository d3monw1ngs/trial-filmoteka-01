{"mappings":"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","sources":["src/js/script.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst API_KEY = 'api_key=b5e824a3d922f68ba211fcf6dbdcb6f5';\nconst API_URL = BASE_URL + '/discover/movie?sort_by-popularity.desc&' + API_KEY;\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst searchURL = BASE_URL + '/search/movie?'+API_KEY;\n\n// LOCAL STORAGE\nlet currentMovieTitle, currentMovieID, queue, watched;\n  JSON.parse(localStorage.getItem(\"movie-queue\")) === null ? queue = [] : queue = JSON.parse(localStorage.getItem(\"movie-queue\"));\n  localStorage.setItem(\"movie-queue\", JSON.stringify(queue));\n  JSON.parse(localStorage.getItem(\"movie-watched\")) === null ? watched = [] : watched = JSON.parse(localStorage.getItem(\"movie-watched\"));\n  localStorage.setItem(\"movie-watched\", JSON.stringify(watched));\n\n// MODAL PART\nconst modal = document.getElementById('myModal');\nconst modalPoster = document.getElementById('modal-poster');\nconst modalTitle = document.getElementById('modal-title');\nconst modalVote = document.getElementById('modal-vote');\nconst modalPopularity = document.getElementById('modal-popularity');\nconst modalOrigTitle = document.getElementById('modal-original-title');\nconst modalGenre = document.getElementById('modal-genre');\nconst modalOverview = document.getElementById('modal-overview');\nconst addToWatchedBtn = document.getElementById('addToWatchedBtn');\nconst addToQueuBtn = document.getElementById('addToQueuBtn');\nconst closeBtn = document.getElementsByClassName('close')[0];\n\nlet genres;\n\nfetch(BASE_URL + '/genre/movie/list?' + API_KEY)\n  .then(response => response.json())\n  .then(data => {\n    genres = data.genres;\n    getMovies(API_URL, genres);\n  })\n  .catch(error => {\n    console.error('Error fetching genres:', error);\n  });\n\n// function to open the modal with movie details\nfunction openModal(movie) {\n    console.log('Movie data:', movie);\n    modalPoster.src = `https://image.tmdb.org/t/p/w500/${movie.poster_path}`;\n    modalTitle.textContent = movie.title;\n    modalVote.innerHTML = `Vote / Votes: <span class=\"vot\">${movie.vote_average}</span> / ${movie.vote_count}`;\n    modalPopularity.innerHTML = `Popularity: <span class=\"pop\">${movie.popularity}</span>`;\n    modalOrigTitle.innerHTML = `Title: <span class=\"titl\">${movie.original_title}</span>`;\n    // modalGenre.textContent = movie.genre;\n    \n    const movieGenres = movie.genre_ids && Array.isArray(genres)\n    ? movie.genre_ids.map(genreId => {\n        const genre = genres.find(genre => genre.id === genreId);\n        return genre ? genre.name : '';\n    }).join(', ')\n    : '';\n\n    modalGenre.innerHTML = `Genre: <span class=\"movgen\">${movieGenres}</span>`;\n    modalOverview.textContent = movie.overview;\n    modal.style.display = \"block\";\n}\n\n// function to close the modal\nfunction closeModal() {\n    modal.style.display = \"none\";\n}\n\n// event listener for the close button\ncloseBtn.addEventListener('click', closeModal);\n\n// event listener for clicks outside the modal\nwindow.addEventListener('click', function(event) {\n    if(event.target === modal) {\n        closeModal();\n    }\n});\n\nconst main = document.getElementById('main');\nconst form = document.getElementById('search-form');\nconst search = document.getElementById('search-input');\nconst galleryEl = document.getElementById('gallery');\nconst loader = document.querySelector('.loader-container');\n\n// PAGINATION\nconst prev = document.getElementById('prev');\nconst next = document.getElementById('next');\nconst current = document.getElementById('current');\n\nvar currentPage = 1;\nvar nextPage = 2;\nvar prevPage = 3;\nvar lastUrl = '';\nvar totalPages = 100;\n\ngetMovies(API_URL);\n\n// DISPLAY MOVIE CARDS\nfunction getMovies(url) {\n  lastUrl = url;\n\n  fetch(url)\n      .then(res => res.json())\n      .then(data => {\n          console.log(data); // Log data to inspect\n          if(data.results.length !== 0){\n              showMovies(data.results);\n              currentPage = data.page;\n              nextPage = currentPage + 1;\n              prevPage = currentPage - 1;\n              totalPages = data.total_pages;\n\n              current.innerText = currentPage;\n              if(currentPage <= 1){\n                  prev.classList.add('disabled');\n                  next.classList.remove('disabled');\n              } else if(currentPage >= totalPages){\n                  prev.classList.remove('disabled');\n                  next.classList.add('disabled');\n              } else {\n                  prev.classList.remove('disabled');\n                  next.classList.remove('disabled');\n              }\n\n          } else {\n              main.classList.toggle('is-hidden');\n              loader.classList.toggle('is-hidden');\n              main.innerHTML = `<h1 class=\"no-results\">No Results Found</h1>`;\n          }\n      })\n      .catch(error => {\n          console.error('Error fetching movies:', error);\n          main.classList.toggle('is-hidden');\n          loader.classList.toggle('is-hidden');\n          main.innerHTML = `<h1 class=\"no-results\">Error fetching movies</h1>`;\n      });\n}\n\nfunction showMovies(data) {\n  main.innerHTML = '';\n\n  data.forEach(movie => {\n      const { title, poster_path, release_date, genre_ids, vote_average } = movie;\n      const movieEl = document.createElement('div');\n      movieEl.classList.add('movie');\n\n      const movieGenres = Array.isArray(genres)\n          ? genre_ids?.map(genreId => {\n              const genre = genres.find(genre => genre.id === genreId);\n              return genre ? genre.name : '';\n          }).join(', ')\n          : '';\n      \n      const releaseYear = release_date ? (new Date(release_date)).getFullYear() : '';\n\n      movieEl.innerHTML = `\n          <img src=\"${poster_path ? IMG_URL + poster_path : 'http://via.placeholder.com/1080x1500'}\" alt=\"${title}\"/>\n          \n          <div class=\"movie-info\">\n              <h3>${title}</h3>\n          </div>\n          <div class=\"genredate\">${movieGenres} | ${releaseYear}</div>\n          <span id=\"vote_average\" class=\"${vote_average}\">${vote_average}</span>\n      `;\n      movieEl.addEventListener('click', function() { openModal(movie) });\n      main.appendChild(movieEl);\n  });\n}\n\nform.addEventListener('submit', (e) => {\n    e.preventDefault();\n\n    const searchTerm = search.value;\n    \n    if(searchTerm) {\n        getMovies(searchURL+'&query='+searchTerm)\n    }else{\n        getMovies(API_URL);\n    }\n})\n\n// function for previous page\nprev.addEventListener('click', () => {\n    if(prevPage > 0) {\n        pageCall(prevPage);\n    }\n})\n\n// function for the next page\nnext.addEventListener('click', () => {\n    if(nextPage <= totalPages) {\n        pageCall(nextPage);\n    }\n})\n\nfunction pageCall(page) {\n    let urlSplit = lastUrl.split('?');\n    let queryParams = urlSplit[1].split('&');\n    let key = queryParams[queryParams.length - 1].split('=');\n    if(key[0] != 'page') {\n        let url = lastUrl + '&page=' + page;\n        getMovies(url);\n    }else{\n        key[1] = page.toString();\n        let a = key.join('=');\n        queryParams[queryParams.length - 1] = a;\n        let b = queryParams.join('&');\n        let url = urlSplit[0] +'?'+ b;\n        getMovies(url);\n    }\n}\n //Clicking a movie\n main.addEventListener('click', e => {\n    let currentMovie = e.target.parentElement;\n    currentMovieTitle = currentMovie.lastElementChild.firstElementChild.innerText;\n    console.log(currentMovieTitle);\n  });\n  //Add to Watched (localStorage)\n  addToWatchedBtn.addEventListener('click', () => {\n    watched.includes(currentMovieTitle)\n      ? alert(`${currentMovieTitle} has been watched already`)\n      : watched.push(currentMovieTitle);\n    localStorage.setItem('movie-watched', JSON.stringify(watched));\n  });\n  //Add to Queue (localStorage)\n  addToQueuBtn.addEventListener('click', () => {\n    queue.includes(currentMovieTitle)\n      ? alert(`${currentMovieTitle} has been added to the queue already`)\n      : queue.push(currentMovieTitle);\n    localStorage.setItem('movie-queue', JSON.stringify(queue));\n  });\n  //Add to Watched (localStorage)\n  addToWatchedBtn.addEventListener('click', () => {\n    watched.includes(currentMovieID) ?\n      alert(`${currentMovieTitle} has been watched already`) :\n      watched.push(currentMovieID);\n    localStorage.setItem('movie-watched', JSON.stringify(watched));\n  })\n  //Add to Queue (localStorage)\n  addToQueuBtn.addEventListener('click', () => {\n    queue.includes(currentMovieID) ?\n      alert(`${currentMovieTitle} has been added to the queue already`) :\n      queue.push(currentMovieID);\n    localStorage.setItem('movie-queue', JSON.stringify(queue));\n  })\n  //Pressing escape to close modal\n  document.body.addEventListener('keydown', event => {\n    if (event.code === 'Escape') {\n      closeModal();\n    }\n  });\n"],"names":["$66b821ea461d9f2a$var$currentMovieTitle","$66b821ea461d9f2a$var$currentMovieID","$66b821ea461d9f2a$var$queue","$66b821ea461d9f2a$var$watched","$66b821ea461d9f2a$var$API_KEY","$66b821ea461d9f2a$var$API_URL","$66b821ea461d9f2a$var$BASE_URL","$66b821ea461d9f2a$var$IMG_URL","JSON","parse","localStorage","getItem","setItem","stringify","$66b821ea461d9f2a$var$genres","$66b821ea461d9f2a$var$modal","document","getElementById","$66b821ea461d9f2a$var$modalPoster","$66b821ea461d9f2a$var$modalTitle","$66b821ea461d9f2a$var$modalVote","$66b821ea461d9f2a$var$modalPopularity","$66b821ea461d9f2a$var$modalOrigTitle","$66b821ea461d9f2a$var$modalGenre","$66b821ea461d9f2a$var$modalOverview","$66b821ea461d9f2a$var$addToWatchedBtn","$66b821ea461d9f2a$var$addToQueuBtn","$66b821ea461d9f2a$var$closeBtn","getElementsByClassName","$66b821ea461d9f2a$var$closeModal","style","display","fetch","then","response","json","data","genres","$66b821ea461d9f2a$var$getMovies","catch","error","console","addEventListener","window","event","target","$66b821ea461d9f2a$var$main","$66b821ea461d9f2a$var$form","$66b821ea461d9f2a$var$search","$66b821ea461d9f2a$var$loader","querySelector","$66b821ea461d9f2a$var$prev","$66b821ea461d9f2a$var$next","$66b821ea461d9f2a$var$current","$66b821ea461d9f2a$var$currentPage","$66b821ea461d9f2a$var$nextPage","$66b821ea461d9f2a$var$prevPage","$66b821ea461d9f2a$var$lastUrl","$66b821ea461d9f2a$var$totalPages","url","res","log","results","length","innerHTML","forEach","movie","title","poster_path","release_date","genre_ids","vote_average","movieEl","createElement","classList","add","movieGenres","Array","isArray","map","genreId","genre2","find","genre","id","name","join","releaseYear","Date","getFullYear","concat","src","textContent","vote_count","popularity","original_title","genre1","overview","$66b821ea461d9f2a$var$openModal","appendChild","$66b821ea461d9f2a$var$showMovies","page","total_pages","innerText","remove","toggle","$66b821ea461d9f2a$var$pageCall","urlSplit","split","queryParams","key","toString","a","b","e","preventDefault","searchTerm","value","$66b821ea461d9f2a$var$searchURL","currentMovie","parentElement","lastElementChild","firstElementChild","includes","alert","push","body","code"],"version":3,"file":"library.14d7315e.js.map"}