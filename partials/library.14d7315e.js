!function(){var e,t,n,a,o="api_key=b5e824a3d922f68ba211fcf6dbdcb6f5",i="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&"+o,c="https://image.tmdb.org/t/p/w500";n=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(n)),a=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(a));var s,l=document.getElementById("myModal"),d=document.getElementById("modal-poster"),r=document.getElementById("modal-title"),u=document.getElementById("modal-vote"),m=document.getElementById("modal-popularity"),g=document.getElementById("modal-original-title"),v=document.getElementById("modal-genre"),p=document.getElementById("modal-overview"),h=document.getElementById("addToWatchedBtn"),f=document.getElementById("addToQueuBtn"),y=document.getElementsByClassName("close")[0];function E(){l.style.display="none"}fetch("https://api.themoviedb.org/3/genre/movie/list?"+o).then((function(e){return e.json()})).then((function(e){s=e.genres,O(i)})).catch((function(e){console.error("Error fetching genres:",e)})),y.addEventListener("click",E),window.addEventListener("click",(function(e){e.target===l&&E()}));var L=document.getElementById("main"),b=document.getElementById("search-form"),I=document.getElementById("search-input"),S=(document.getElementById("gallery"),document.querySelector(".loader-container")),B=document.getElementById("prev"),w=document.getElementById("next"),_=document.getElementById("current"),k=1,T=2,N=3,J="",M=100;function O(e){J=e,fetch(e).then((function(e){return e.json()})).then((function(e){console.log(e),0!==e.results.length?(!function(e){L.innerHTML="",e.forEach((function(e){var t=e.title,n=e.poster_path,a=e.release_date,o=e.genre_ids,i=e.vote_average,h=document.createElement("div");h.classList.add("movie");var f=Array.isArray(s)?null==o?void 0:o.map((function(e){var t=s.find((function(t){return t.id===e}));return t?t.name:""})).join(", "):"",y=a?new Date(a).getFullYear():"";h.innerHTML='\n          <img src="'.concat(n?c+n:"http://via.placeholder.com/1080x1500",'" alt="').concat(t,'"/>\n          \n          <div class="movie-info">\n              <h3>').concat(t,'</h3>\n          </div>\n          <div class="genredate">').concat(f," | ").concat(y,'</div>\n          <span id="vote_average" class="').concat(i,'">').concat(i,"</span>\n      "),h.addEventListener("click",(function(){!function(e){console.log("Movie data:",e),d.src="https://image.tmdb.org/t/p/w500/".concat(e.poster_path),r.textContent=e.title,u.innerHTML='Vote / Votes: <span class="vot">'.concat(e.vote_average,"</span> / ").concat(e.vote_count),m.innerHTML='Popularity: <span class="pop">'.concat(e.popularity,"</span>"),g.innerHTML='Title: <span class="titl">'.concat(e.original_title,"</span>");var t=e.genre_ids&&Array.isArray(s)?e.genre_ids.map((function(e){var t=s.find((function(t){return t.id===e}));return t?t.name:""})).join(", "):"";v.innerHTML='Genre: <span class="movgen">'.concat(t,"</span>"),p.textContent=e.overview,l.style.display="block"}(e)})),L.appendChild(h)}))}(e.results),k=e.page,T=k+1,N=k-1,M=e.total_pages,_.innerText=k,k<=1?(B.classList.add("disabled"),w.classList.remove("disabled")):k>=M?(B.classList.remove("disabled"),w.classList.add("disabled")):(B.classList.remove("disabled"),w.classList.remove("disabled"))):(L.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),L.innerHTML='<h1 class="no-results">No Results Found</h1>')})).catch((function(e){console.error("Error fetching movies:",e),L.classList.toggle("is-hidden"),S.classList.toggle("is-hidden"),L.innerHTML='<h1 class="no-results">Error fetching movies</h1>'}))}function q(e){var t=J.split("?"),n=t[1].split("&"),a=n[n.length-1].split("=");if("page"!=a[0]){O(J+"&page="+e)}else{a[1]=e.toString();var o=a.join("=");n[n.length-1]=o;var i=n.join("&");O(t[0]+"?"+i)}}O(i),b.addEventListener("submit",(function(e){e.preventDefault();var t=I.value;O(t?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+t:i)})),B.addEventListener("click",(function(){N>0&&q(N)})),w.addEventListener("click",(function(){T<=M&&q(T)})),L.addEventListener("click",(function(t){var n=t.target.parentElement;e=n.lastElementChild.firstElementChild.innerText,console.log(e)})),h.addEventListener("click",(function(){a.includes(e)?alert("".concat(e," has been watched already")):a.push(e),localStorage.setItem("movie-watched",JSON.stringify(a))})),f.addEventListener("click",(function(){n.includes(e)?alert("".concat(e," has been added to the queue already")):n.push(e),localStorage.setItem("movie-queue",JSON.stringify(n))})),h.addEventListener("click",(function(){a.includes(t)?alert("".concat(e," has been watched already")):a.push(t),localStorage.setItem("movie-watched",JSON.stringify(a))})),f.addEventListener("click",(function(){n.includes(t)?alert("".concat(e," has been added to the queue already")):n.push(t),localStorage.setItem("movie-queue",JSON.stringify(n))})),document.body.addEventListener("keydown",(function(e){"Escape"===e.code&&E()}))}();
//# sourceMappingURL=library.14d7315e.js.map
