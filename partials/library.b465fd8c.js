const e="https://api.themoviedb.org/3/discover/movie?sort_by-popularity.desc&api_key=b5e824a3d922f68ba211fcf6dbdcb6f5";let t,n,s;n=null===JSON.parse(localStorage.getItem("movie-queue"))?[]:JSON.parse(localStorage.getItem("movie-queue")),localStorage.setItem("movie-queue",JSON.stringify(n)),s=null===JSON.parse(localStorage.getItem("movie-watched"))?[]:JSON.parse(localStorage.getItem("movie-watched")),localStorage.setItem("movie-watched",JSON.stringify(s));const a=document.getElementById("myModal"),o=document.getElementById("modal-poster"),d=document.getElementById("modal-title"),i=document.getElementById("modal-vote"),l=document.getElementById("modal-popularity"),r=document.getElementById("modal-original-title"),c=document.getElementById("modal-genre"),m=document.getElementById("modal-overview"),g=document.getElementById("addToWatchedBtn"),u=document.getElementById("addToQueuBtn"),p=document.getElementsByClassName("close")[0];let v;function h(){a.style.display="none"}fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5").then((e=>e.json())).then((t=>{v=t.genres,T(e)})).catch((e=>{console.error("Error fetching genres:",e)})),p.addEventListener("click",h),window.addEventListener("click",(function(e){e.target===a&&h()}));const y=document.getElementById("main"),f=document.getElementById("search-form"),E=document.getElementById("search-input"),b=(document.getElementById("gallery"),document.querySelector(".loader-container")),L=document.getElementById("prev"),I=document.getElementById("next"),S=document.getElementById("current");var B=1,$=2,_=3,k="",w=100;function T(e){k=e,fetch(e).then((e=>e.json())).then((e=>{console.log(e),0!==e.results.length?(!function(e){y.innerHTML="",e.forEach((e=>{const{title:t,release_date:n,genre_ids:s,vote_average:g}=e,u=document.createElement("div");u.classList.add("movie");const p=Array.isArray(v)?null==s?void 0:s.map((e=>{const t=v.find((t=>t.id===e));return t?t.name:""})).join(", "):"",h=n?new Date(n).getFullYear():"";u.innerHTML=`\n          <img src="https://image.tmdb.org/t/p/w500/${e.poster_path}" alt="${t}"/>\n          \n          <div class="movie-info">\n              <h3>${t}</h3>\n          </div>\n          <div class="genredate">${p} | ${h}</div>\n          <span id="vote_average" class="${g}">${g}</span>\n      `,u.addEventListener("click",(function(){!function(e){console.log("Movie data:",e),o.src=`https://image.tmdb.org/t/p/w500/${e.poster_path}`,d.textContent=e.title,i.innerHTML=`Vote / Votes: <span class="vot">${e.vote_average}</span> / ${e.vote_count}`,l.innerHTML=`Popularity: <span class="pop">${e.popularity}</span>`,r.innerHTML=`Title: <span class="titl">${e.original_title}</span>`;const t=e.genre_ids&&Array.isArray(v)?e.genre_ids.map((e=>{const t=v.find((t=>t.id===e));return t?t.name:""})).join(", "):"";c.innerHTML=`Genre: <span class="movgen">${t}</span>`,m.textContent=e.overview,a.style.display="block"}(e)})),y.appendChild(u)}))}(e.results),B=e.page,$=B+1,_=B-1,w=e.total_pages,S.innerText=B,B<=1?(L.classList.add("disabled"),I.classList.remove("disabled")):B>=w?(L.classList.remove("disabled"),I.classList.add("disabled")):(L.classList.remove("disabled"),I.classList.remove("disabled"))):(y.classList.toggle("is-hidden"),b.classList.toggle("is-hidden"),y.innerHTML='<h1 class="no-results">No Results Found</h1>')})).catch((e=>{console.error("Error fetching movies:",e),y.classList.toggle("is-hidden"),b.classList.toggle("is-hidden"),y.innerHTML='<h1 class="no-results">Error fetching movies</h1>'}))}function N(e){let t=k.split("?"),n=t[1].split("&"),s=n[n.length-1].split("=");if("page"!=s[0]){T(k+"&page="+e)}else{s[1]=e.toString();let a=s.join("=");n[n.length-1]=a;let o=n.join("&");T(t[0]+"?"+o)}}T(e),f.addEventListener("submit",(t=>{t.preventDefault();const n=E.value;T(n?"https://api.themoviedb.org/3/search/movie?api_key=b5e824a3d922f68ba211fcf6dbdcb6f5&query="+n:e)})),L.addEventListener("click",(()=>{_>0&&N(_)})),I.addEventListener("click",(()=>{$<=w&&N($)})),y.addEventListener("click",(e=>{let n=e.target.parentElement;t=n.lastElementChild.firstElementChild.innerText,console.log(t)})),g.addEventListener("click",(()=>{s.includes(t)?alert(`${t} has been watched already`):s.push(t),localStorage.setItem("movie-watched",JSON.stringify(s))}));const q=document.querySelector(".movie-queu");if(q){q.innerText}else console.error("Element not found.");u.addEventListener("click",(()=>{n.includes(t)?alert(`${t} has been added to the queue already`):n.push(t),localStorage.setItem("movie-queue",JSON.stringify(n))})),g.addEventListener("click",(()=>{s.includes(undefined)?alert(`${t} has been watched already`):s.push(undefined),localStorage.setItem("movie-watched",JSON.stringify(s))})),u.addEventListener("click",(()=>{n.includes(undefined)?alert(`${t} has been added to the queue already`):n.push(undefined),localStorage.setItem("movie-queue",JSON.stringify(n))})),document.body.addEventListener("keydown",(e=>{"Escape"===e.code&&h()}));
//# sourceMappingURL=library.b465fd8c.js.map
